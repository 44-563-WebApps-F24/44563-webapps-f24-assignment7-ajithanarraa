<!DOCTYPE html>
<html>
<head>
    <title>Ajitha Narra goes on safari</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1 {
            color: #2c3e50;
        }
        #locations, #score, #help {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            background-color: #f9f9f9;
        }
        #locations {
            color: #3498db;
        }
        #score {
            color: #e74c3c;
        }
        #help {
            color: #2ecc71;
        }
        /* Style the game grid */
        .grid {
            display: grid;
            grid-template-columns: repeat(6, 100px);
            grid-template-rows: repeat(6, 100px);
            gap: 10px;
        }
        .grid div {
            width: 100px;
            height: 100px;
            border: 1px solid #ccc;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .grid div img {
            max-width: 90px;
            max-height: 90px;
        }
    </style>
</head>
<body>

    <h1>Ajitha Narra goes on safari</h1>

    <p>Click on the locations to find rare animals, watch out for the lion.</p>

    <div id="locations">Number of locations checked is zero.</div>
    <div id="score">Score is zero.</div>

    <div id="help" style="cursor: pointer;">Click for help.</div>
    <div>Help report: <span id="help-report">None</span></div>

    <!-- Game field -->
    <div class="grid">
        <!-- Generate the 6x6 grid with unique ids and onclick handlers -->
        <div><img id="img0" src="tree.jpg" onclick="check(0)" alt="Tree"></div>
        <div><img id="img1" src="tree.jpg" onclick="check(1)" alt="Tree"></div>
        <div><img id="img2" src="tree.jpg" onclick="check(2)" alt="Tree"></div>
        <div><img id="img3" src="tree.jpg" onclick="check(3)" alt="Tree"></div>
        <div><img id="img4" src="tree.jpg" onclick="check(4)" alt="Tree"></div>
        <div><img id="img5" src="tree.jpg" onclick="check(5)" alt="Tree"></div>

        <div><img id="img6" src="tree.jpg" onclick="check(6)" alt="Tree"></div>
        <div><img id="img7" src="tree.jpg" onclick="check(7)" alt="Tree"></div>
        <div><img id="img8" src="tree.jpg" onclick="check(8)" alt="Tree"></div>
        <div><img id="img9" src="tree.jpg" onclick="check(9)" alt="Tree"></div>
        <div><img id="img10" src="tree.jpg" onclick="check(10)" alt="Tree"></div>
        <div><img id="img11" src="tree.jpg" onclick="check(11)" alt="Tree"></div>

        <div><img id="img12" src="tree.jpg" onclick="check(12)" alt="Tree"></div>
        <div><img id="img13" src="tree.jpg" onclick="check(13)" alt="Tree"></div>
        <div><img id="img14" src="tree.jpg" onclick="check(14)" alt="Tree"></div>
        <div><img id="img15" src="tree.jpg" onclick="check(15)" alt="Tree"></div>
        <div><img id="img16" src="tree.jpg" onclick="check(16)" alt="Tree"></div>
        <div><img id="img17" src="tree.jpg" onclick="check(17)" alt="Tree"></div>

        <div><img id="img18" src="tree.jpg" onclick="check(18)" alt="Tree"></div>
        <div><img id="img19" src="tree.jpg" onclick="check(19)" alt="Tree"></div>
        <div><img id="img20" src="tree.jpg" onclick="check(20)" alt="Tree"></div>
        <div><img id="img21" src="tree.jpg" onclick="check(21)" alt="Tree"></div>
        <div><img id="img22" src="tree.jpg" onclick="check(22)" alt="Tree"></div>
        <div><img id="img23" src="tree.jpg" onclick="check(23)" alt="Tree"></div>

        <div><img id="img24" src="tree.jpg" onclick="check(24)" alt="Tree"></div>
        <div><img id="img25" src="tree.jpg" onclick="check(25)" alt="Tree"></div>
        <div><img id="img26" src="tree.jpg" onclick="check(26)" alt="Tree"></div>
        <div><img id="img27" src="tree.jpg" onclick="check(27)" alt="Tree"></div>
        <div><img id="img28" src="tree.jpg" onclick="check(28)" alt="Tree"></div>
        <div><img id="img29" src="tree.jpg" onclick="check(29)" alt="Tree"></div>

        <div><img id="img30" src="tree.jpg" onclick="check(30)" alt="Tree"></div>
        <div><img id="img31" src="tree.jpg" onclick="check(31)" alt="Tree"></div>
        <div><img id="img32" src="tree.jpg" onclick="check(32)" alt="Tree"></div>
        <div><img id="img33" src="tree.jpg" onclick="check(33)" alt="Tree"></div>
        <div><img id="img34" src="tree.jpg" onclick="check(34)" alt="Tree"></div>
        <div><img id="img35" src="tree.jpg" onclick="check(35)" alt="Tree"></div>
    </div>
    <script>
        // Declare variables
        const ids = Array.from({ length: 36 }, (_, i) => `img${i}`);
        let score = 0;
        let locationsVisited = 0;
        let lastLocation = 0;
        const zebraLocations = [1, 8, 12, 22, 34];
        let lionLocation = Math.floor(Math.random() * 36);  // Random initial location for the lion
        let gameOver = false;
    
        let countdown;  // Variable for countdown interval
        let timerValue; // Variable for the countdown value
    
        // Randomly place zebras
        const randomZebraLocations = [];
        while (randomZebraLocations.length < 5) {
            let randPos = Math.floor(Math.random() * 36);
            if (!randomZebraLocations.includes(randPos) && randPos !== lionLocation) {
                randomZebraLocations.push(randPos);
            }
        }
    
        // Function to start the countdown
        function startCountdown() {
            timerValue = Math.floor(Math.random() * 9) + 2; // Random value between 2 and 10
            document.getElementById("score").innerText = `Score is ${score}. Countdown: ${timerValue}`;
    
            countdown = setInterval(() => {
                timerValue--;
                document.getElementById("score").innerText = `Score is ${score}. Countdown: ${timerValue}`;
                
                if (timerValue <= 0) {
                    clearInterval(countdown);
                    alert("Time's up! The game is over.");
                    gameOver = true; // End the game if the countdown reaches 0
                }
            }, 1000); // Update every second
        }
    
        // Call the countdown function when the game starts
        startCountdown();
    
        // Check function
        function check(position) {
            if (gameOver) return;
    
            const imgId = ids[position];
            const imgElement = document.getElementById(imgId);
    
            // Move lion randomly to adjacent cell
            const moveLion = () => {
                const directions = [-1, 1, -6, 6]; // left, right, up, down
                const validMoves = directions.filter(dir => {
                    const newPos = lionLocation + dir;
                    return newPos >= 0 && newPos < 36 && !(dir === -1 && lionLocation % 6 === 0) && !(dir === 1 && lionLocation % 6 === 5);
                });
                const randomMove = validMoves[Math.floor(Math.random() * validMoves.length)];
                lionLocation += randomMove;
            };
    
            moveLion();
    
            // Change image based on position
            if (position === lionLocation) {
                imgElement.src = 'lion.jpg';  // Change image to lion
                score -= 2;  // Lion reduces score
                gameOver = true;
            } else if (randomZebraLocations.includes(position)) {
                imgElement.src = 'zebra.jpg';  // Change image to zebra
                score += 4;  // Zebra increases score by 4
                randomZebraLocations.splice(randomZebraLocations.indexOf(position), 1);  // Remove zebra from locations
            } else {
                imgElement.src = 'elephant.jpg';  // Change image to elephant
                score += 1;  // Elephant increases score by 1
            }
    
            locationsVisited++;
            lastLocation = position;
    
            // Update text
            document.getElementById("locations").innerText = `Number of locations checked is ${locationsVisited}.`;
            document.getElementById("score").innerText = `Score is ${score}. Countdown: ${timerValue}`;
        }
    
        // Help function
        function help() {
            let message = "Its grey";  // Default message
    
            // Check for closest zebra locations
            const closestLocations = [lastLocation - 1, lastLocation + 1, lastLocation - 6, lastLocation + 6].map(x => (x + 36) % 36);  // Wrap around logic
    
            if (closestLocations.some(loc => randomZebraLocations.includes(loc))) {
                message = "I see stripes";
            } else {
                // Compute row and column differences between lastLocation and lionLocation
                const lastRow = Math.floor(lastLocation / 6);
                const lastCol = lastLocation % 6;
                const lionRow = Math.floor(lionLocation / 6);
                const lionCol = lionLocation % 6;
    
                if (Math.abs(lastRow - lionRow) <= 1 && Math.abs(lastCol - lionCol) <= 1) {
                    message = "Rawr";
                }
            }
    
            document.getElementById("help-report").innerText = message;  // Update help report
        }
    
        // Swap function
        function swap() {
            const randIndex1 = Math.floor(Math.random() * 36);
            let randIndex2;
            do {
                randIndex2 = Math.floor(Math.random() * 36);
            } while (randIndex1 === randIndex2);  // Ensure not to pick the same element
    
            const img1 = document.getElementById(ids[randIndex1]);
            const img2 = document.getElementById(ids[randIndex2]);
            const tempSrc = img1.src;
            img1.src = img2.src;
            img2.src = tempSrc;
        }
    
        // Set the onClick for the "Click for help" element
        document.getElementById('help').onclick = help;
    </script>
    
</body>
</html>
